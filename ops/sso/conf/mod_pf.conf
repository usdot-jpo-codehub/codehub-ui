### Configuration file for the PingFederate Apache Agent

# (Required)
# The path to the exported PingFederate Agent configuration file
# (agent-config.txt), containing information the OpenToken library uses to 
# generate and consume tokens.
#
# Path can be either absolute or relative to the ServerRoot definition 
# from httpd.conf.

PingFederateAgentConfigurationFile   conf/agent-config.txt

### PingFederate OpenToken Session Cookie Properties

# (Required)
# Specifies the name of the cookie(s) generated by PingFederate. This setting 
# should match the setting in PingFederate administrative console for the 
# configured OpenToken Adapter instance.

PingFederateCookieName                 stagetoken

# (Optional)
# The cookie domain to which the cookie applies. Must match value in the
# agent configuration file, if specified there. If not specified, domain
# is taken from the request.
 
#PingFederateCookieDomain                .example.com

# The cookie path, specifies the subset of URLs to which the cookie applies.
# The default is "/".

PingFederateCookiePath                  /

# Enables or disables the "secure" attribute of the cookie. Secure cookies 
# will only be sent by a user-agent over a secured TLS connection.
# The default is "no".

PingFederateCookieIsSecure              no


# (Required)
# (Multiple entries and regular expressions are allowed.) 
# Specifies the path prefix of protected resources.  The Apache Agent uses 
# this to determine whether a particular request is for a protected resource. 
# Protected resources are normally defined relative to Apache htdocs folder 
# (depending on your version of Apache), the location for which is defined by 
# the standard Apache configuration option - DocumentRoot - in the httpd.conf file.
# Multiple definitions are available, each one on a separate line. They are 
# stored in an internal array in the order they appear in configuration file; 
# therefore, actively used filters should go first.
#
# Note: We do not support query string filters.

PingFederateFilter                  /
#PingFederateFilter                  .*protected.*

# (Optional)
# (Multiple entries and regular expressions are allowed.) 
# The path prefix of unprotected resources which require user attributes. 
# If a request matches one of these resources the Apache Agent will 
# process an opentoken (if it exists) and populate the request header
# with all of the user attributes within that token.
# Multiple resources can be specified, each one on a separate line. They are 
# stored in an internal array in the order they appear in configuration file; 
# therefore, actively used filters should go first.

PingFederateFilterAnonymous           /sso/sso.php


# (Optional)
# The optional parts of the base URL for substitution in the original request
# URL, for use when there is a reverse proxy in front of the Apache server.
# During SP-initiated SSO, it makes possible automatic redirection to the
# request URL with a modified base URL after successful SSO. If no one part
# is specified, redirection will be entirely based on the request URL.
# The port number should correspond to the HTTP scheme, if the scheme is
# specified.

#PingFederateApplicationScheme          https
#PingFederateApplicationHost            www.example.com
#PingFederateApplicationPort            8083

# (Required)
# The PingFederate SSO application endpoint URL for redirection when
# OpenToken is not supplied in the request, has expired, or is not valid.

PingFederateLoginPageURL            https://sso.boozallencsn.com/sp/startSSO.ping?PartnerIdpId=Stage_IDP

# (Optional)
# Specifies the URL that the PingFederate Apache Agent will redirect to in the 
# event of unrecoverable errors in consuming or generating tokens. If not
# specified, errors are displayed by the agent itself, without a redirect.

#PingFederateErrorPageURL             http://www.example.com/error
#PingFederateErrorPageURL            /example_app/error

# (Used when single logout is configured)
# (Multiple entries and regular expressions are allowed.)
# Specifies the URL used by the PingFederate Apache Agent to cancel the 
# PingFederate session.  This URL should be specified relative to the Apache Web 
# Server root specified by the DocumentRoot property in the httpd.conf file.

PingFederateCancelURL                /example_app/cancel
#PingFederateCancelURL               /protected_app/.*action=cancel.*
#PingFederateCancelURL               /unprotected_app/cancel.*

# (Optional)
# The URL to redirect to if a Cancel URL is requested. This will typically be
# set to PingFederate's <BaseURL>/sp/startSLO.ping endpoint, to start an SLO.
# If not specified, only the local session will be cancelled.
#PingFederateSLOURL                  https://pfhost.example.com:9031/sp/startSLO.ping

# (Required ONLY for single logout)
# Base URL including hostname and port for the PingFederate server 
#PingFederateBaseURL                  https://pfhost.example.com:9031

### Server environment variables and HTTP headers

# Enables setting session attributes as environment variables, HTTP
# headers, or both. Defaults are "yes".

PingFederateExposeSessionAttributesToEnvironmentVariables   yes
PingFederateExposeSessionAttributesToHttpHeaders            yes

# Specifies whether to expose variables only for the first request in the
# session (when set to "yes"), or for all requests (when set to "no"). 
# The default is "no".

PingFederateSendAttributesOnce          no

# (Optional)
# Specifies the prefix that will be pre-pended to all HTTP Environment 
# Variables used to convey PingFederate session information to the application. 
# Default: PF_AUTH_
# Caution:  For security reasons, based on this prefix, the Agent removes HTTP 
# headers available to the Apache server. For example, for the default PF_AUTH_ 
# prefix, the Agent removes all HTTP headers beginning with PF_AUTH_ and 
# HTTP_PF_AUTH_ set by either the user-agent or other Apache modules.  For this 
# reason, if you change the default prefix, ensure that the prefix is unique -- 
# that is, one not used or likely to be used by another Apache-controlled 
# application.
#
# For security reasons, if a prefix is not specified, the Extended Adapter Contract 
# must include an attribute 'pf_attribute_list' which contains a comma-separated 
# list of all the attributes in the extended attribute contract.

PingFederateAuthnPrefix                 PF_AUTH_

# (Optional)
# (Multiple entries allowed)
# Filter definition for session attributes that should 
# be passed to the target application.  If there is no rule configured, 
# nothing is exposed to the application.

PingFederateSessionAttrFilter .*
#PingFederateSessionAttrFilter subject
#PingFederateSessionAttrFilter user-dn
#PingFederateSessionAttrFilter realm.*

# URL filter that determines if the resource being accessed should display
# a Start Page. Regular expressions allowed.
# Disabled by default. This is useful for debugging.
PingFederateStartPageURL        /.*cmd=PingStartPage.*

# The HTML error page template file for reporting the configuration and
# run-time errors directly to the user browser.
# Path may be either an absolute, or relative to the httpd.conf ServerRoot
# definition. If not specified, a prebuilt template is used.

# PingFederateErrorPageTemplateFile  conf/error_page_template.html
 
# The start page template for reporting to the administrator/user browser
# the HTTP headers and/or environment variables, exposed by the Apache Agent
# to the application.
# Path may be either an absolute, or relative to the httpd.conf ServerRoot
# definition. If not specified, a prebuilt template is used.

# PingFederateStartPageTemplateFile  conf/start_page_template.html

# (Optional)
# The filter pattern, with regular expressions allowed. When a virtual host
# name matches a pattern, the Apache Agent is completely disabled for handling
# requests for the matched host. By default, the Apache Agent is enabled for
# all virtual hosts.
# Samples:
#   # Next line disables all virtual hosts
#   PingFederateDisableAgentForVirtualHost   .*
#   # Next line disables a range of virtual hosts such as "virt_2011.example.com"
#   PingFederateDisableAgentForVirtualHost    virt_[0-9]{4}.example.com, virt_[a-z]{4}.example.com
#   PingFederateDisableAgentForVirtualHost    virt1.example.com, virt2.example.com

# (Optional)
# Enables or disables caching of session cookies in the user browser.
# Disabling is recommended and is mostly important for session logout
# (SLO) events, for guaranteed cleanup of the previously valid session
# cookies.
# When set to "yes" (the default), caching of session cookies in the user
# browser is disabled by setting up the HTTP response header:
#   Cache-Control:no-cache="set-cookie"
# Setting to "no" may be necessary for browsers if setting this
# response header causes problems.
#
PingFederateEnableUserBrowserCacheControl  yes

# (Optional)
# Specifies an alternative value of the outbound HTTP request header
# "Cache-Control", as a replacement of the default value:
#   no-cache="set-cookie"
# Implies that the value of option "PingFederateEnableUserBrowserCacheControl"
# is configured to "yes", otherwise the option
# "PingFederateCacheControlHeaderValue"  is ignored.
# When the value is not configured, the "Cache-Control" header is set to the
# default value
#   no-cache="set-cookie"
# When the value is configured empty, the "Cache-Control" header is not added.
# See possible values:
#   http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html
# Samples:
#   PingFederateCacheControlHeaderValue
#   PingFederateCacheControlHeaderValue       no-cache="set-cookie"
#   PingFederateCacheControlHeaderValue       private, max-age=600
#   PingFederateCacheControlHeaderValue       must-revalidate, max-age=600

### Output Verbosity

# For verbocity greater than 1, the "httpd.conf" should be updated similarly
# to "LogLevel info".

# 0 - errors only (default)
# 1 - warnings
# 2 - priority informational messages
# 3 - bulk informational messages
# 4 - citation of HTTP requests & responses, listing of cache tables, listing
#     of environment variables passed to the application
# 5 - debug output (not used)

PingFederateVerboseLevel                5

# 0 - errors only (default)
# 1 - warnings
# 2 - priority informational messages
# 3 - bulk informational messages
# 4 - citation of tokens and binary data
# 5 - debug output

PingFederateOpenTokenLibVerboseLevel    5
